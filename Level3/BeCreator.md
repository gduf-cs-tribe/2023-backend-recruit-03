# 2023-backend-recruit-03-Level3

# BeCreator

# 目录

**本考核内容针对学习C++/go的同学设计**

- [具体要求 & 考核介绍](#具体要求 & 考核介绍)
- [示例](#示例)
- [注意](#注意)
- [各个语言可能涉及到的关键特性](#各个语言可能涉及到的关键特性)



## 考核要求

1. **强制**使用git进行版本控制，并且push到github或gitee

要把仓库设置为公开仓库

要在编码过程中逐渐进行commit，并且commit信息要认真写

在仓库中建议用issue记录自己的工作进程以及需求或未来规划 (这点非强制性，其他均为强制性)

3. 提交到仓库里的**必须**要有README，README中包含：运行和开发环境，快速开始，运行流程（可以用

流程图）······（推荐找些知名的仓库并且看他们的README进行参考）

5. **必须**使用utf-8编码



## **涉及技术关键字**

1. I/O操作
2. 多线程/多进程
3. Socket编程
4. Reactor模型**功能要求**



## 项目介绍

**K-V数据库  **

小爪很忧郁，他在上次写完Key-Value数据库后，总感觉自己写的内容不够好，并且感觉这个数据库能处理

的请求数比较少。为此，他打算把代码进行完善。

总结：为小爪设计一个key-value数据库，并且尽量减少磁盘IO。



### **基本内容以及功能**

1. 用Socket编程，写一个服务端和一个客户端，使得双方能够相互通信，且服务端能处理客户端请求。
2. 服务器一个线程可以处理n个来自不同socket的请求。(**Reactor**模型)
3. 支持持久化，可以选择**追加日志文件持久化**或**二进制数据持久化**。
4. 支持 *后端第二轮考核* 中除了Help之外的命令。
5. 使用**日志**框架。
6. 支持本轮追加的命令：

保存指令：save命令，手动对数据进行强制持久化。

后台保存指令：bgsave命令，同save指令，不过为后台任务。

清空缓存指令：flushdb命令，把缓存全部清空，可以考虑async和sync两种清空。

设置key过期时间：expire [key] [delay] (delay是多少秒后过期)

查看过期时间指令：ddl [key] (显示还有多少秒过期)

集合相关指令：

往key中加入新的成员：sadd [key] [member1] [member2] ......

查看集合中的全部成员：smembers [key]

判断某个元素是不是集合中的成员：sismember [key] [member]

删除集合中的成员：srem [key] [member]

7. 使用配置文件，通过读取配置文件来获取可以被配置的数据。例如：持久化文件位置、端口号、开启哪一种持久化方法。



### `*`**高级功能（无需全部完成）**

1. 实现数据(二进制)持久化和追加日志文件持久化，能够同时使用两种日志。
2. 在软件关闭前，再做一次持久化。
3. 能标识错误，并且在程序中进行了处理，例如HTTP协议中的400状态码和500状态码。
4. 能够做出一套该kv数据库的API供其他程序使用。
5. 自定义请求报文和响应报文。（这部分必须把报文格式写在项目文档中）
6. 添加用户系统与命名空间机制，且每个用户都将被分配一个独立的命名空间。不同用户在各自命名空间中操作的数据互不影响。系统应能同时支持多个用户之间的操作，操作之间互不干扰。



### **考核建议**

1. 请先思考好整体架构，不要盲目开始敲代码，要考虑到代码的优雅和健壮性。
2. 每个指令都要有相应的响应值。
3. 在服务端的控制台可以打印相应的日志数据以便debug等。
4. 客户端界面不用美观，简单的命令行就好，只要能有提示输入的作用就行。
5. 编码要求：要求分文件写，不能全部写在同一个文件里
6. 代码注释务必写好。标明每一个方法的作用、变量的作用等等

